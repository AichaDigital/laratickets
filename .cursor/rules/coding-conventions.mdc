---
description: "Aicha project specific conventions"
alwaysApply: true
---
# Lararoi Package Conventions

## Project Specific Rules
- **Code language**: All code, comments, docblocks, variable names, method names MUST be in English
- **Documentation language**: All user-facing documentation (README, guides, manuals) MUST be in Spanish for communication with the developer
- Comments and docblocks in every method and class (in English)
- When facing basic errors that interrupt workflow, overcome obstacles without modifying completed work - instead, open necessary steps and note them in todo.md

## Migrations (Project Specific)
- Migrations are one file per table
  - Never combine multiple tables/actions in a single file, especially with ID changes, foreign keys, and constraints
- Before make complex migrations with actions in refactor indexes, foreign keys, complex index, make a backup database in `database/backups/` with format `lowino-YYYYMMDDHHMM.sql`
  - For refactoring tables, create separate files for field changes and indexes

## Technology Stack
- Use PHP 8.4+ features (typed properties, match expressions, etc.)
- Repository pattern for data access layer
- Service layer for business logic
- Implement middleware for request filtering

## Monetary and Financial Data
- **NEVER use float or decimal for monetary values, percentages, rates, prices, amounts**
- **ALWAYS use integers in base 100 (cents/hundredths) for all financial data**
- Examples: 21.50% stored as 2150, â‚¬12.34 stored as 1234, 15.75% stored as 1575
- This prevents floating-point rounding errors, facilitates exact fiscal calculations, and improves arithmetic operations
- Apply this rule to: VAT rates, prices, amounts, percentages, tax calculations, invoice totals, etc.
- Use this approach in models, factories, tests, and all financial calculations

## Testing
- Test-driven development with Pest
- Feature tests for Livewire components
- End-to-end testing with Laravel Dusk
- Test coverage for critical functionality
- **ALWAYS create factories for all models** - both in main project and packages
- Use factories instead of manual model creation in tests for consistency and maintainability
- Create specific factory states for different model configurations (e.g., `spanish()`, `inactive()`)

## Frontend Development
- Modular Livewire components
- Efficient Alpine.js usage
- Tailwind utility-first approach with DaisyUI components
- Component-based architecture
- Progressive enhancement
- use pnpm instead npm

## Performance
- Lazy loading when appropriate
- Cache implementation with Redis
- Query optimization
- Asset optimization with Vite
- Background job queues
